try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="14a5adcf-d0b7-43c5-9687-9ff2b383be6c",e._sentryDebugIdIdentifier="sentry-dbid-14a5adcf-d0b7-43c5-9687-9ff2b383be6c")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{2649:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/admin/users",function(){return s(41291)}])},5958:(e,a,s)=>{"use strict";s.d(a,{y:()=>r});var t=s(37876),l=s(48566),n=s(14259),i=s(14232);let r=e=>{var a;let{confirmationText:s,actionText:r,actionCallback:c,passProps:u}=e,[o,d]=(0,i.useState)(!0),[x,p]=(0,i.useState)(!1),j=null!=s?s:"Na pewno?",[y,h]=(0,i.useState)(r),b=(0,i.useCallback)(async()=>{o?(d(!1),h(j),await (0,l.aZ)(2e3),d(!0),h(r)):(p(!0),await (0,l.aZ)(100),await c(),h(r),await (0,l.aZ)(150),d(!0),p(!1))},[o,r,j,c]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.A,{variant:"outlined",...u,disabled:x||(null==u?void 0:u.disabled),color:o?null!=(a=null==u?void 0:u.color)?a:"warning":"error",onClick:b,children:y})})}},27272:(e,a,s)=>{"use strict";s.d(a,{b:()=>r});var t=s(37876),l=s(42008),n=s(5820),i=s(73056);let r=e=>{var a;return(0,t.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:i.M.spacing[1],padding:i.M.spacing[1]},children:(null!=(a=e.values)?a:[]).map(e=>(0,t.jsx)(n.A,{color:"secondary",label:e},e))})}},41291:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>G});var t=s(37876),l=s(82777),n=s(48566),i=s(14259),r=s(40359),c=s(14232),u=s(80767),o=s(9605);let d=async(e,a,s)=>{await (0,u.m)({config:{url:o.H.USER_GET_ALL,mode:"get"},successCallback:async e=>{await a(e)},errorCallback:async e=>{await s(e)}})};var x=s(58311),p=s(45524),j=s(10960),y=s(73456),h=s(87662),b=s(39821);let v=(0,c.createContext)({appUsers:[],setAppUsers:()=>void 0,updateAppUsers:()=>void 0});var g=s(18979),_=s(5958);let f=e=>{let{user:a}=e,[s,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{l(b.U.utils.IS_ADMIN(a))},[a,a.role]);let i=(0,c.useCallback)(async e=>{l(!0),await e(),await (0,n.aZ)(400),l(!1)},[]),[r,u]=(0,c.useState)(a.is_active);(0,c.useEffect)(()=>{u(a.is_active)},[a.is_active]);let{updateAppUsers:o}=(0,c.useContext)(v),x=(0,c.useCallback)(async()=>{await (0,j.tl)({user_id:a.user_id},async e=>{o(),u(!1)},async e=>{})},[o,a.user_id]),p=(0,c.useCallback)(async()=>{await (0,j.G9)({user_id:a.user_id},async e=>{o(),u(!0)},async e=>{})},[o,a.user_id]),[y,h]=(0,c.useState)(0===a.sessions.length);(0,c.useEffect)(()=>{h(0===a.sessions.length)},[a.sessions.length]);let f=(0,c.useCallback)(async()=>{await (0,g.s)({user_id:a.user_id},async e=>{o(),h(!0),await d(void 0,async e=>{},async e=>{})},async e=>{})},[o,a.user_id]),m=(0,c.useCallback)(async()=>{(0,j.OZ)({user_id:a.user_id},async e=>{o()},async e=>{})},[o,a.user_id]),A={minWidth:"100px",height:"20px",opacity:"0.9"};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.y,{passProps:{disabled:y,color:"primary",sx:A},actionText:"Wyloguj",actionCallback:()=>i(f)}),(0,t.jsx)(_.y,{passProps:{disabled:r||s,color:"success",sx:A},actionText:"Aktywuj",actionCallback:()=>i(p)}),(0,t.jsx)(_.y,{passProps:{disabled:!r||s,color:"primary",sx:A},actionText:"Dezaktywuj",actionCallback:()=>i(x)}),(0,t.jsx)(_.y,{passProps:{disabled:s,sx:A},actionText:"Usuń 4ever",actionCallback:()=>i(m)})]})};var m=s(42008),A=s(69095),k=s(73056);let C=e=>{let{el1:a,el2:s,sx:n}=e,i=(0,c.useCallback)(e=>{e.target,e.target.select&&e.target.select()},[]);return(0,t.jsxs)(m.A,{sx:{display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:3,...n},children:["string"==typeof a&&(0,t.jsx)(l.A,{sx:{flex:1,maxWidth:"80px",fontSize:k.M.fontSize[0]},children:a}),"object"==typeof a&&a,("string"==typeof s||null===s)&&(0,t.jsx)(A.A,{variant:"standard",sx:{flex:1,minWidth:"210px",my:"0","input.MuiInput-input":{padding:0}},value:null!=s?s:"–",onClick:i}),"object"==typeof s&&s]})};var w=s(42485),N=s(50390);let S=e=>{let{user:a,id:s}=e,n=(0,p.GV)(h.mi),u=(0,c.useCallback)(async()=>{await (0,j.W)({user_id:a.user_id},async e=>{},async e=>{})},[a.user_id]),[o,d]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{d(b.U.utils.IS_ADMIN(a))},[a,a.role]),(0,t.jsxs)(x.A,{id:String(s),variant:"outlined",sx:{backgroundColor:(null==n?void 0:n.email)===a.email?"rgba(3,12,64,0.15)":"transparent",margin:"3px",display:"flex",flexDirection:"column",gap:1,minWidth:"320px",width:"100%",maxWidth:"480px",justifyContent:"space-between"},children:[(0,t.jsxs)(r.A,{children:[(0,t.jsx)(C,{el2:(0,t.jsx)(i.A,{disabled:o,variant:"text",onClick:u,children:"Become"}),el1:a.is_active?(0,t.jsx)(l.A,{sx:{color:"green",fontWeight:600},children:"User aktywny"}):(0,t.jsx)(l.A,{sx:{color:"red",fontWeight:600},children:"User wyłączony"})}),a.display_name&&(0,t.jsx)(C,{el1:"Nazwa: ",el2:a.display_name}),(0,t.jsx)(C,{el1:"Email: ",el2:a.email}),(0,t.jsx)(C,{el1:"Rola: ",el2:(0,w.V2)(a.role)}),(0,t.jsx)(C,{el1:"Stan płatności: ",el2:(0,w.hp)(a.account.payment_status)}),(0,t.jsx)(C,{el1:"Stan konta: ",el2:(0,w.W7)(a.account.account_status)}),(0,t.jsx)(C,{el1:"Kiedy konto wygasa: ",el2:(0,y.W)(a.account.account_expiration_date)}),(0,t.jsx)(C,{el1:"Pricing plan: ",el2:(0,N.E)(a.account.pricing_plan)}),(0,t.jsx)(C,{el1:"Utworzono: ",el2:(0,y.W)(a.created_at)}),(0,t.jsx)(C,{el1:"Data płatności: ",el2:(0,y.W)(a.account.upcoming_payment_date)}),(0,t.jsx)(C,{el1:"Aktywne sesje: ",el2:String(a.sessions.length)})]}),(0,t.jsx)(r.A,{sx:{alignItems:"center",flexDirection:"row",flexWrap:"wrap"},children:(0,t.jsx)(f,{user:a})})]},s)};var O=s(49006),M=s(96524),E=s(56486),U=s(3291),L=s(64611);let T=()=>{let{appUsers:e}=(0,c.useContext)(v),[a,s]=(0,c.useState)(!1);return{appUsers:e,isFilterDisabled:a,setIsFilterDisabled:s,isFilterActiveCollection:(0,c.useCallback)(e=>e.length>0,[])}};var W=s(856);let I=e=>{let{children:a,name:s}=e;return(0,t.jsxs)(W.A,{children:[(0,t.jsx)(l.A,{variant:"caption",children:s}),a]})};var D=s(27272);let P=e=>{let{callback:a}=e,{appUsers:s,isFilterDisabled:l,setIsFilterDisabled:n,isFilterActiveCollection:i}=T(),[r,u]=(0,c.useState)([]),o=(0,c.useCallback)(e=>{n(!0);let{target:{value:t}}=e,l="string"==typeof t?t.split(","):t;u(l),a(i(l)?s.filter(e=>!l.includes(e.account.payment_status)).map(e=>e.user_id):[],"payment_status"),n(!1)},[s,a,i,n]);return(0,t.jsx)(I,{name:"Status płatności",children:(0,t.jsx)(O.A,{multiple:!0,value:r,onChange:o,slotProps:{notchedOutline:{sx:{borderColor:i(r)?k.M.statusColors[0]:void 0}}},renderValue:e=>(0,t.jsx)(D.b,{values:e}),children:Object.values(L.kr).map(e=>(0,t.jsxs)(M.A,{disabled:l,value:e,children:[(0,t.jsx)(E.A,{checked:r.includes(e)}),(0,t.jsx)(U.A,{primary:(0,w.hp)(e)})]},e))})})},z=e=>{let{callback:a}=e,{appUsers:s,isFilterDisabled:l,setIsFilterDisabled:n,isFilterActiveCollection:i}=T(),[r,u]=(0,c.useState)([]),o=(0,c.useCallback)(e=>{n(!0);let{target:{value:t}}=e,l="string"==typeof t?t.split(","):t;u(l),a(i(l)?s.filter(e=>!l.includes(e.role)).map(e=>e.user_id):[],"role"),n(!1)},[s,a,i,n]);return(0,t.jsx)(I,{name:"Rola",children:(0,t.jsx)(O.A,{multiple:!0,value:r,onChange:o,slotProps:{notchedOutline:{sx:{borderColor:i(r)?k.M.statusColors[0]:void 0}}},renderValue:e=>(0,t.jsx)(D.b,{values:e}),children:Object.values(L.Q0).map(e=>(0,t.jsxs)(M.A,{disabled:l,value:e,children:[(0,t.jsx)(E.A,{checked:r.includes(e)}),(0,t.jsx)(U.A,{primary:(0,w.V2)(e)})]},e))})})},Y=e=>{let{callback:a}=e,{appUsers:s,isFilterDisabled:l,setIsFilterDisabled:n,isFilterActiveCollection:i}=T(),[r,u]=(0,c.useState)([]),o=(0,c.useCallback)(e=>{n(!0);let{target:{value:t}}=e,l="string"==typeof t?t.split(","):t;u(l),a(i(l)?s.filter(e=>!l.includes(e.account.account_status)).map(e=>e.user_id):[],"account_status"),n(!1)},[s,a,i,n]);return(0,t.jsx)(I,{name:"Status konta",children:(0,t.jsx)(O.A,{multiple:!0,value:r,onChange:o,slotProps:{notchedOutline:{sx:{borderColor:i(r)?k.M.statusColors[0]:void 0}}},renderValue:e=>(0,t.jsx)(D.b,{values:e}),children:Object.values(L.Nv).map(e=>(0,t.jsxs)(M.A,{disabled:l,value:e,children:[(0,t.jsx)(E.A,{checked:r.includes(e)}),(0,t.jsx)(U.A,{primary:(0,w.W7)(e)})]},e))})})},F=Object.freeze({YES:"YES",NO:"NO"}),V=e=>{let{callback:a}=e,{appUsers:s,isFilterDisabled:l,setIsFilterDisabled:n,isFilterActiveCollection:i}=T(),[r,u]=(0,c.useState)([]),o=(0,c.useCallback)(e=>{n(!0);let{target:{value:t}}=e,l="string"==typeof t?t.split(","):t;u(l),a(i(l)?s.filter(e=>!l.includes(e.is_active?"YES":"NO")).map(e=>e.user_id):[],"is_active"),n(!1)},[s,a,i,n]);return(0,t.jsx)(I,{name:"Czy użytkownik jest aktywny",children:(0,t.jsx)(O.A,{multiple:!0,value:r,onChange:o,slotProps:{notchedOutline:{sx:{borderColor:i(r)?k.M.statusColors[0]:void 0}}},renderValue:e=>(0,t.jsx)(D.b,{values:e}),children:Object.values(F).map(e=>(0,t.jsxs)(M.A,{disabled:l,value:e,children:[(0,t.jsx)(E.A,{checked:r.includes(e)}),(0,t.jsx)(U.A,{primary:e})]},e))})})},H=e=>{let{callback:a}=e,{appUsers:s}=T(),[l,n]=(0,c.useState)(""),i=(0,c.useCallback)(e=>{let{target:{value:t}}=e;n(t),a(""!==t?s.filter(e=>!e.email.toLowerCase().includes(t.toLowerCase())).map(e=>e.user_id):[],"email")},[s,a]);return(0,t.jsx)(I,{name:"email",children:(0,t.jsx)(A.A,{variant:"outlined",value:l,onChange:i,sx:{".MuiOutlinedInput-notchedOutline":{borderColor:""!==l?k.M.statusColors[0]:void 0}}})})},R=e=>{let{usersListRef:a}=e,{appUsers:s}=(0,c.useContext)(v),n=(0,c.useRef)({}),[i,u]=(0,c.useState)(null),o=(0,c.useCallback)((e,s)=>{var t,l;n.current[s]=e;let i=null!=(l=null==(t=a.current)?void 0:t.children)?l:[],r=i.length,o=r,d=Object.values(n.current).flat();(0,c.startTransition)(()=>{for(let e=0;e<i.length;e++){let a=i[e],s=Number(a.id);d.includes(s)?a.style.display="none":(o--,a.style.display="")}}),u(r-o)},[a]);return(0,t.jsxs)(r.A,{sx:{marginTop:k.M.spacing[4]},children:[(0,t.jsx)(l.A,{variant:"h3",children:"Filtruj:"}),(0,t.jsx)(V,{callback:o}),(0,t.jsx)(Y,{callback:o}),(0,t.jsx)(z,{callback:o}),(0,t.jsx)(P,{callback:o}),(0,t.jsx)(H,{callback:o}),(0,t.jsxs)(l.A,{variant:"h3",children:["Ilość użytkownik\xf3w: ",(0,t.jsxs)(l.A,{sx:{marginBottom:k.M.spacing[2],visibility:null===i?"hidden":"visible"},color:i===s.length?void 0:"success",component:"span",variant:"h3",children:[i," / "]})," ",s.length," "]})]})};var B=s(95063);let Z=()=>{let[e,a]=(0,c.useState)(!1),[s,l]=(0,c.useState)(!1),u=(()=>{let[e,a]=(0,c.useState)([]),s=(0,p.GV)(h.mi),t=(0,c.useCallback)(async()=>{b.U.utils.IS_ADMIN(s)&&await d(void 0,async e=>{a(e.data)},async e=>{})},[s]);return{appUsers:e,setAppUsers:a,updateAppUsers:t}})(),{appUsers:o,setAppUsers:x}=u,j=(0,c.useCallback)(async()=>{a(!0),l(!0),await d(void 0,async e=>{(0,c.startTransition)(()=>{x(e.data)})},async e=>{}),await (0,n.aZ)(300),l(!1),a(!1)},[x]);(0,n.Ns)(j);let y=(0,c.useRef)(null),g=(0,c.useMemo)(()=>0===o.length?(0,t.jsx)(B.A,{sx:{margin:"auto"}}):o.map(e=>(0,t.jsx)(S,{id:e.user_id,user:e},e.user_id)),[o]);return(0,t.jsxs)(v.Provider,{value:u,children:[(0,t.jsx)(i.A,{variant:"outlined",loading:s,disabled:e,onClick:j,children:"Update list now"}),(0,t.jsx)(R,{usersListRef:y}),(0,t.jsx)(r.A,{component:"ol",ref:y,sx:{flexDirection:"row",flexWrap:"wrap",gap:1},children:g})]})};function G(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{variant:"h1",children:"Użytkownicy"}),(0,t.jsx)(Z,{})]})}},42485:(e,a,s)=>{"use strict";s.d(a,{V2:()=>l,W7:()=>n,hp:()=>i});var t=s(64611);let l=e=>e?t.cu[e]:"Brak",n=e=>e?t.dU[e]:"Brak",i=e=>e?t.YP[e]:"Brak"},50390:(e,a,s)=>{"use strict";s.d(a,{E:()=>n});var t=s(37876),l=s(84389);let n=function(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e?(0,t.jsxs)("span",{children:[l.AD[e]," PLN ",(()=>{if(!a)return(0,t.jsx)(t.Fragment,{});let s=(0,t.jsx)("strong",{children:"(popularny)"});if(e===l.xv.monthly||e===l.xv.annual)return s})()," na miesiąc."]}):(0,t.jsx)(t.Fragment,{children:"Brak"})}},84389:(e,a,s)=>{"use strict";s.d(a,{AD:()=>n,GX:()=>r,mc:()=>c,xv:()=>i});var t=s(52653);let l=Object.freeze({FREE:10,MONTHLY_1:1,MONTHLY_2:2,MONTHLY_3:3,ANNUAL_1:4,ANNUAL_2:5,ANNUAL_3:6});(0,t.X)(l);let n=Object.freeze({[l.FREE]:0,[l.MONTHLY_1]:30,[l.MONTHLY_2]:50,[l.MONTHLY_3]:100,[l.ANNUAL_1]:24,[l.ANNUAL_2]:40,[l.ANNUAL_3]:80});Array.from(Object.entries(n).keys());let i=Object.freeze({monthly:l.MONTHLY_2,annual:l.ANNUAL_3}),r="annual",c=30}},e=>{e.O(0,[160,95,820,85,636,593,792],()=>e(e.s=2649)),_N_E=e.O()}]);