try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dbc4ed80-5945-4a93-92c2-7be8778617bc",e._sentryDebugIdIdentifier="sentry-dbid-dbc4ed80-5945-4a93-92c2-7be8778617bc")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{3417:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/admin/notes",function(){return i(65793)}])},5958:(e,t,i)=>{"use strict";i.d(t,{y:()=>c});var n=i(37876),s=i(48566),a=i(14259),l=i(14232);let c=e=>{var t;let{confirmationText:i,actionText:c,actionCallback:o,passProps:r}=e,[d,u]=(0,l.useState)(!0),[h,b]=(0,l.useState)(!1),v=null!=i?i:"Na pewno?",[g,x]=(0,l.useState)(c),f=(0,l.useCallback)(async()=>{d?(u(!1),x(v),await (0,s.aZ)(2e3),u(!0),x(c)):(b(!0),await (0,s.aZ)(100),await o(),x(c),await (0,s.aZ)(150),u(!0),b(!1))},[d,c,v,o]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.A,{variant:"outlined",...r,disabled:h||(null==r?void 0:r.disabled),color:d?null!=(t=null==r?void 0:r.color)?t:"warning":"error",onClick:f,children:g})})}},65793:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var n=i(37876),s=i(82777),a=i(40359),l=i(48566),c=i(70641),o=i(69095),r=i(97585),d=i(82561),u=i(14232),h=i(10960),b=i(73456),v=i(5958);let g=e=>{let{editor:t}=e;return t?(0,n.jsx)(r.mM,{editor:t,tippyOptions:{duration:100},children:(0,n.jsxs)("div",{className:"editor__bubble-menu",children:[(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:t.isActive("bold")?"is-active":"",children:"Bold"}),(0,n.jsx)("hr",{style:{margin:"2px"}}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().setParagraph().run(),className:t.isActive("paragraph")?"is-active":"",children:"Normal"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),className:t.isActive("heading",{level:1})?"is-active":"",children:"H1"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),className:t.isActive("heading",{level:2})?"is-active":"",children:"H2"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),className:t.isActive("heading",{level:3})?"is-active":"",children:"H3"})]})}):null},x=e=>{let{editor:t}=e;return t?(0,n.jsxs)("div",{className:"editor__menu-bar",children:[(0,n.jsx)("button",{onClick:()=>t.chain().focus().setHardBreak().run(),className:t.isActive("hardBreak")?"is-active":"",children:"Hard break"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:t.isActive("bulletList")?"is-active":"",children:"Bullet list"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:t.isActive("orderedList")?"is-active":"",children:"Ordered list"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().toggleCodeBlock().run(),className:t.isActive("codeBlock")?"is-active":"",children:"Code block"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().setHorizontalRule().run(),children:"Set line"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().undo().run(),children:"UNDO"}),(0,n.jsx)("button",{onClick:()=>t.chain().focus().redo().run(),children:"REDO"})]}):null},f=()=>{let[e,t]=(0,u.useState)(""),i=(0,l.d7)(e,1e3),f=(0,u.useCallback)(async e=>{let{editor:i}=e;t(i.getHTML())},[]),[p,k]=(0,u.useState)(!1),[j,m]=(0,u.useState)([]),[y,w]=(0,u.useState)(""),[C,N]=(0,u.useState)(null),[_,A]=(0,u.useState)(!!C),[S,E]=(0,u.useState)(!0),H=(0,u.useCallback)(async e=>{await (0,h.LZ)({id:e},async e=>{(0,u.startTransition)(async()=>{w(e.data.notes),m(e.data.versions),0===e.data.versions.length?E(!0):E(!1)})},async e=>{})},[]),T=(0,u.useCallback)(()=>{C&&(0,h.$M)({id:C},async e=>{H(),A(!1)},async e=>{})},[C,H]);(0,u.useEffect)(()=>{i&&(E(!0),(0,h.vV)({notes:i},async e=>{await H(),E(!1),k(!0),await (0,l.aZ)(6e3),k(!1)},async e=>{}),A(!1))},[i,H]);let Z=(0,r.hG)({immediatelyRender:!0,extensions:[d.A],onUpdate:f});return((0,u.useEffect)(()=>{(0,u.startTransition)(async()=>{Z.commands.setContent(y)})},[Z,y]),(0,l.Ns)(H),Z)?(0,n.jsxs)(a.A,{children:[(0,n.jsx)(g,{editor:Z}),(0,n.jsx)(x,{editor:Z}),(0,n.jsx)(r.$Z,{editor:Z}),(0,n.jsx)(s.A,{variant:"h3",sx:{color:e=>e.palette.success.dark,pointerEvents:"none",position:"sticky",marginRight:1,bottom:15,textAlign:"right",transition:"opacity 300ms ease",opacity:+!!p},children:"Zapisano."}),(0,n.jsxs)(a.A,{sx:{flexDirection:"row",alignItems:"center",columnGap:2,flexWrap:"wrap"},children:[(0,n.jsx)(c.A,{freeSolo:!0,disabled:S,options:j,getOptionLabel:e=>(0,b.W)(e.created_at),onChange:(e,t)=>{H(t.id),N(t.id),A(!0)},id:"notes-versions",sx:{width:280},disableClearable:!0,renderInput:e=>(0,n.jsx)(o.A,{...e,label:"Search for previous version"})}),(0,n.jsx)(v.y,{confirmationText:"ZAPINSZ TERANZ",passProps:{color:"info",variant:"contained",sx:{minWidth:"200px",visibility:_?"visible":"hidden"}},actionText:"Ustaw jako gł\xf3wną",actionCallback:T})]})]}):null};function p(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{variant:"h1",children:"Notatki"}),(0,n.jsx)(f,{})]})}}},e=>{e.O(0,[352,361,160,95,820,641,127,636,593,792],()=>e(e.s=3417)),_N_E=e.O()}]);